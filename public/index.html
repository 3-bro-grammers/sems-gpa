<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SEMS GPA PLUGIN</title>
  <!--
    
    <script defer src="/__/firebase/7.16.0/firebase-app.js"></script>
    
    <script defer src="/__/firebase/7.16.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/7.16.0/firebase-database.js"></script>
    <script defer src="/__/firebase/7.16.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/7.16.0/firebase-storage.js"></script>
    
    <script defer src="/__/firebase/init.js"></script>
  -->

</head>

<body>


  <div id="stud">
    <img id="img_captcha">
    <input type="text" id="captcha_txt">
    <button onclick="get_res()">RESULT</button><br>
    <input type="text" id="reg_txt">
    <input type="text" id="pass_txt">
    

  </div>
  <pre id="result">

  </pre>
  <script>

    var temp_cookies;

    fetch("https://tv58io4a49.execute-api.us-east-2.amazonaws.com/default/sems-gpa",
      {
        method: "post",
        body: JSON.stringify({ captcha: null })
      }).then(res => res.json()).then((data) => {
        img_captcha.src = "data:image/jpeg;base64," + data.captcha;
        temp_cookies = data.cookies[0].substring(0, data.cookies[0].indexOf(";")+1)+ data.cookies[1].substring(0, data.cookies[1].indexOf(";")+1);
      })

    function get_res() {

      fetch("https://tv58io4a49.execute-api.us-east-2.amazonaws.com/default/sems-gpa",
        {
          method: "post",
          body: JSON.stringify({
            reg: reg_txt.value,
            pass: pass_txt.value,
            captcha: captcha_txt.value,
            cookies: temp_cookies
          }),
        }).then(res => res.json()).then(data=>{
          result.innerHTML = JSON.stringify(data,null, 4);
        })
    }
  </script>
</body>

</html>